<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Gist Fetch Debug</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    body { font-family: monospace; padding: 24px; background: #f6f7f9; color: #222; }
    h1 { margin-top: 0; }
    .ok { color: green; font-weight: bold; }
    .err { color: red; font-weight: bold; }
    pre { background: #fff; padding: 12px; border: 1px solid #ccc; overflow-x: auto; white-space: pre-wrap; word-break: break-word; }
    .box { margin-bottom: 20px; }
  </style>
</head>

<body>
<h1>Gist JSON Fetch Debug</h1>

<div class="box"><strong>Status:</strong> <span id="status">Loading…</span></div>

<div class="box">
  <strong>Raw response:</strong>
  <pre id="raw">—</pre>
</div>

<div class="box">
  <strong>Parsed value (cfg.url):</strong>
  <pre id="parsed">—</pre>
</div>

<script>
  // ✅ Put your REAL raw gist URL here:
  // Example format:
  // https://gist.githubusercontent.com/<user>/<gistid>/raw/rutdepth_link.json
  const GIST_URL = "https://gist.githubusercontent.com/<user>/<gistid>/raw/rutdepth_link.json";

  (async () => {
    try {
      // cache-bust (use ? if no query string exists)
      const url = GIST_URL + (GIST_URL.includes("?") ? "&" : "?") + "_=" + Date.now();

      const r = await fetch(url, { cache: "no-store" });
      if (!r.ok) throw new Error(`HTTP ${r.status}`);

      const raw = await r.text();
      document.getElementById("raw").textContent = raw;

      const cfg = JSON.parse(raw);
      if (!cfg.url) throw new Error("JSON parsed but 'url' field is missing");

      document.getElementById("parsed").textContent = cfg.url;
      document.getElementById("status").textContent = "SUCCESS";
      document.getElementById("status").className = "ok";
    } catch (err) {
      document.getElementById("status").textContent = "FAILED";
      document.getElementById("status").className = "err";
      document.getElementById("parsed").textContent = err.message;
      console.error("Gist fetch failed:", err);
    }
  })();
</script>
</body>
</html>
